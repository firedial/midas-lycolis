version: '3.8'
services:
    haruhi:
        build: ./haruhi
        env_file: ./haruhi/.env
        ports:
            - "8111:80"
        volumes:
         - ./haruhi/app:/app
        tty: true
        env_file: ./haruhi/.env
        command: uvicorn main:app --reload --host "0.0.0.0" --port "80"
    yui:
        build:
            context: ./yui
            dockerfile: Dockerfile
        restart: always
        env_file: ./yui/.env
        hostname: yui
        volumes:
         - db:/var/lib/mysql
    rikka:
        build: ./rikka
        restart: always
        env_file: ./rikka/.env
        volumes:
         - ./rikka:/home/root
        privileged: true
        tty: true
volumes:
    db:
